# MZEMU

## An emulator for the MZ2284MAXRISC CPU architecture and instruction set

# installation
```Terminal
> npm install -g mzemu
```
---
# from project folder
```
> mzemu
```
---
# setup
```Terminal
mzemu > init
```
---
# Project Structure
```
├── build/
│   └── build.mz
├── modules/
│   └── arithmetic.mz
|   └── other modules...
├── config.json
└── main.mz
```
---
# main.mz is the entry point. main.mz may refer to functions defined in module files
```main.mz
MOVR0DR 100110
STM 0
MOVR0DR 101
STM 1
CALL arithmetic/multiply
HALT
```
---
# ./modules/arithmetic.mz
```./modules/arithmetic.mz
add:
    LDM 1
    MOVIRR0
    LDM 0
    SUM
    MOVR0RR
    STM 10
    RETURN

subtract:
    LDM 1
    MOVIRR0
    LDM 0
    SUB
    MOVR0RR
    STM 10
    RETURN

multiply:
    multiply_loop:
        CALL multiply_add
        CALL multiply_decrement_counter
        JNZ multiply_loop
    
    MOVR0R1
    STM 10
    HALT

    multiply_add:
        LDM 0001
        MOVIRR0
        MOVR0R1
        SUM
        MOVR0RR
        MOVR1R0
        RETURN

    multiply_decrement_counter:
        MOVR0DR 0001        // prepare to decrement
        MOVIRR0
        LDM 0000            // load counter
        SUB                  // counter - 1
        MOVR0RR
        STM 0000             // store back counter
        RETURN
RETURN

divide:
    divide_loop:
        //while(n1 <= n0)
        LDM 1
        MOVIRR0
        LDM 0
        CMP
        JN divide_after_loop

        //n0 = n0 - n1
        LDM 1
        MOVIRR0
        LDM 0
        SUB
        MOVR0RR
        STM 0

        //ctr++
        MOVR0R1
        INCR0
        MOVR1R0

    JMP divide_loop

    divide_after_loop:
        MOVR0R1
        STM 10

RETURN

```
---
# build
```Terminal
mzemu > build
```
---
# execute (-b build flag, build before execution)
```Terminal
mzemu > execute
```
```Terminal
mzemu > execute -b
```
---
# CPU state after execution
```Terminal
mzemu > print
```
---
```
[MZ2284MAXRISC CPU STATE]
REGISTERS:
┌─────────┬──────────┬─────────┬────────────┬──────┐
│ (index) │ Register │ Decimal │ Binary     │ Hex  │
├─────────┼──────────┼─────────┼────────────┼──────┤
│ 0       │ 'R0'     │ 190     │ '10111110' │ 'BE' │
│ 1       │ 'R1'     │ 190     │ '10111110' │ 'BE' │
│ 2       │ 'IR'     │ 1       │ '00000001' │ '01' │
│ 3       │ 'RR'     │ 0       │ '00000000' │ '00' │
│ 4       │ 'PR'     │ 0       │ '00000000' │ '00' │
│ 5       │ 'SP'     │ 0       │ '00000000' │ '00' │
│ 6       │ 'IP'     │ 29      │ '00011101' │ '1D' │
└─────────┴──────────┴─────────┴────────────┴──────┘
FLAGS:
┌─────────┬──────┬───────┐
│ (index) │ Flag │ Value │
├─────────┼──────┼───────┤
│ 0       │ 'Z'  │ 1     │
│ 1       │ 'C'  │ 0     │
│ 2       │ 'N'  │ 0     │
└─────────┴──────┴───────┘
MEMORY:
┌─────────┬──────────┬─────────┬────────────┬─────────┬──────────┬────────────┬──────────┐
│ (index) │ Validity │ AddrDec │ AddrBin    │ AddrHex │ ValueDec │ ValueBin   │ ValueHex │
├─────────┼──────────┼─────────┼────────────┼─────────┼──────────┼────────────┼──────────┤
│ 0       │ 1        │ 0       │ '00000000' │ '00'    │ 0        │ '00000000' │ '00'     │
│ 1       │ 1        │ 1       │ '00000001' │ '01'    │ 5        │ '00000101' │ '05'     │
│ 2       │ 1        │ 2       │ '00000010' │ '02'    │ 190      │ '10111110' │ 'BE'     │
│ 3       │ 0        │ 3       │ '00000011' │ '03'    │ 0        │ '00000000' │ '00'     │
│ 4       │ 0        │ 4       │ '00000100' │ '04'    │ 0        │ '00000000' │ '00'     │
│ 5       │ 0        │ 5       │ '00000101' │ '05'    │ 0        │ '00000000' │ '00'     │
│ 6       │ 0        │ 6       │ '00000110' │ '06'    │ 0        │ '00000000' │ '00'     │
│ 7       │ 0        │ 7       │ '00000111' │ '07'    │ 0        │ '00000000' │ '00'     │
│ 8       │ 0        │ 8       │ '00001000' │ '08'    │ 0        │ '00000000' │ '00'     │
│ 9       │ 0        │ 9       │ '00001001' │ '09'    │ 0        │ '00000000' │ '00'     │
│ 10      │ 0        │ 10      │ '00001010' │ '0A'    │ 0        │ '00000000' │ '00'     │
│ 11      │ 0        │ 11      │ '00001011' │ '0B'    │ 0        │ '00000000' │ '00'     │
│ 12      │ 0        │ 12      │ '00001100' │ '0C'    │ 0        │ '00000000' │ '00'     │
│ 13      │ 0        │ 13      │ '00001101' │ '0D'    │ 0        │ '00000000' │ '00'     │
│ 14      │ 0        │ 14      │ '00001110' │ '0E'    │ 0        │ '00000000' │ '00'     │
│ 15      │ 0        │ 15      │ '00001111' │ '0F'    │ 0        │ '00000000' │ '00'     │
│ 16      │ 0        │ 16      │ '00010000' │ '10'    │ 0        │ '00000000' │ '00'     │
│ 17      │ 0        │ 17      │ '00010001' │ '11'    │ 0        │ '00000000' │ '00'     │
│ 18      │ 0        │ 18      │ '00010010' │ '12'    │ 0        │ '00000000' │ '00'     │
│ 19      │ 0        │ 19      │ '00010011' │ '13'    │ 0        │ '00000000' │ '00'     │
│ 20      │ 0        │ 20      │ '00010100' │ '14'    │ 0        │ '00000000' │ '00'     │
│ 21      │ 0        │ 21      │ '00010101' │ '15'    │ 0        │ '00000000' │ '00'     │
│ 22      │ 0        │ 22      │ '00010110' │ '16'    │ 0        │ '00000000' │ '00'     │
│ 23      │ 0        │ 23      │ '00010111' │ '17'    │ 0        │ '00000000' │ '00'     │
│ 24      │ 0        │ 24      │ '00011000' │ '18'    │ 0        │ '00000000' │ '00'     │
│ 25      │ 0        │ 25      │ '00011001' │ '19'    │ 0        │ '00000000' │ '00'     │
│ 26      │ 0        │ 26      │ '00011010' │ '1A'    │ 0        │ '00000000' │ '00'     │
│ 27      │ 0        │ 27      │ '00011011' │ '1B'    │ 0        │ '00000000' │ '00'     │
│ 28      │ 0        │ 28      │ '00011100' │ '1C'    │ 0        │ '00000000' │ '00'     │
│ 29      │ 0        │ 29      │ '00011101' │ '1D'    │ 0        │ '00000000' │ '00'     │
│ 30      │ 0        │ 30      │ '00011110' │ '1E'    │ 0        │ '00000000' │ '00'     │
│ 31      │ 0        │ 31      │ '00011111' │ '1F'    │ 0        │ '00000000' │ '00'     │
│ 32      │ 0        │ 32      │ '00100000' │ '20'    │ 0        │ '00000000' │ '00'     │
│ 33      │ 0        │ 33      │ '00100001' │ '21'    │ 0        │ '00000000' │ '00'     │
│ 34      │ 0        │ 34      │ '00100010' │ '22'    │ 0        │ '00000000' │ '00'     │
│ 35      │ 0        │ 35      │ '00100011' │ '23'    │ 0        │ '00000000' │ '00'     │
│ 36      │ 0        │ 36      │ '00100100' │ '24'    │ 0        │ '00000000' │ '00'     │
│ 37      │ 0        │ 37      │ '00100101' │ '25'    │ 0        │ '00000000' │ '00'     │
│ 38      │ 0        │ 38      │ '00100110' │ '26'    │ 0        │ '00000000' │ '00'     │
│ 39      │ 0        │ 39      │ '00100111' │ '27'    │ 0        │ '00000000' │ '00'     │
│ 40      │ 0        │ 40      │ '00101000' │ '28'    │ 0        │ '00000000' │ '00'     │
│ 41      │ 0        │ 41      │ '00101001' │ '29'    │ 0        │ '00000000' │ '00'     │
│ 42      │ 0        │ 42      │ '00101010' │ '2A'    │ 0        │ '00000000' │ '00'     │
│ 43      │ 0        │ 43      │ '00101011' │ '2B'    │ 0        │ '00000000' │ '00'     │
│ 44      │ 0        │ 44      │ '00101100' │ '2C'    │ 0        │ '00000000' │ '00'     │
│ 45      │ 0        │ 45      │ '00101101' │ '2D'    │ 0        │ '00000000' │ '00'     │
│ 46      │ 0        │ 46      │ '00101110' │ '2E'    │ 0        │ '00000000' │ '00'     │
│ 47      │ 0        │ 47      │ '00101111' │ '2F'    │ 0        │ '00000000' │ '00'     │
│ 48      │ 0        │ 48      │ '00110000' │ '30'    │ 0        │ '00000000' │ '00'     │
│ 49      │ 0        │ 49      │ '00110001' │ '31'    │ 0        │ '00000000' │ '00'     │
│ 50      │ 0        │ 50      │ '00110010' │ '32'    │ 0        │ '00000000' │ '00'     │
│ 51      │ 0        │ 51      │ '00110011' │ '33'    │ 0        │ '00000000' │ '00'     │
│ 52      │ 0        │ 52      │ '00110100' │ '34'    │ 0        │ '00000000' │ '00'     │
│ 53      │ 0        │ 53      │ '00110101' │ '35'    │ 0        │ '00000000' │ '00'     │
│ 54      │ 0        │ 54      │ '00110110' │ '36'    │ 0        │ '00000000' │ '00'     │
│ 55      │ 0        │ 55      │ '00110111' │ '37'    │ 0        │ '00000000' │ '00'     │
│ 56      │ 0        │ 56      │ '00111000' │ '38'    │ 0        │ '00000000' │ '00'     │
│ 57      │ 0        │ 57      │ '00111001' │ '39'    │ 0        │ '00000000' │ '00'     │
│ 58      │ 0        │ 58      │ '00111010' │ '3A'    │ 0        │ '00000000' │ '00'     │
│ 59      │ 0        │ 59      │ '00111011' │ '3B'    │ 0        │ '00000000' │ '00'     │
│ 60      │ 0        │ 60      │ '00111100' │ '3C'    │ 0        │ '00000000' │ '00'     │
│ 61      │ 0        │ 61      │ '00111101' │ '3D'    │ 0        │ '00000000' │ '00'     │
│ 62      │ 0        │ 62      │ '00111110' │ '3E'    │ 0        │ '00000000' │ '00'     │
│ 63      │ 0        │ 63      │ '00111111' │ '3F'    │ 0        │ '00000000' │ '00'     │
│ 64      │ 0        │ 64      │ '01000000' │ '40'    │ 0        │ '00000000' │ '00'     │
│ 65      │ 0        │ 65      │ '01000001' │ '41'    │ 0        │ '00000000' │ '00'     │
│ 66      │ 0        │ 66      │ '01000010' │ '42'    │ 0        │ '00000000' │ '00'     │
│ 67      │ 0        │ 67      │ '01000011' │ '43'    │ 0        │ '00000000' │ '00'     │
│ 68      │ 0        │ 68      │ '01000100' │ '44'    │ 0        │ '00000000' │ '00'     │
│ 69      │ 0        │ 69      │ '01000101' │ '45'    │ 0        │ '00000000' │ '00'     │
│ 70      │ 0        │ 70      │ '01000110' │ '46'    │ 0        │ '00000000' │ '00'     │
│ 71      │ 0        │ 71      │ '01000111' │ '47'    │ 0        │ '00000000' │ '00'     │
│ 72      │ 0        │ 72      │ '01001000' │ '48'    │ 0        │ '00000000' │ '00'     │
│ 73      │ 0        │ 73      │ '01001001' │ '49'    │ 0        │ '00000000' │ '00'     │
│ 74      │ 0        │ 74      │ '01001010' │ '4A'    │ 0        │ '00000000' │ '00'     │
│ 75      │ 0        │ 75      │ '01001011' │ '4B'    │ 0        │ '00000000' │ '00'     │
│ 76      │ 0        │ 76      │ '01001100' │ '4C'    │ 0        │ '00000000' │ '00'     │
│ 77      │ 0        │ 77      │ '01001101' │ '4D'    │ 0        │ '00000000' │ '00'     │
│ 78      │ 0        │ 78      │ '01001110' │ '4E'    │ 0        │ '00000000' │ '00'     │
│ 79      │ 0        │ 79      │ '01001111' │ '4F'    │ 0        │ '00000000' │ '00'     │
│ 80      │ 0        │ 80      │ '01010000' │ '50'    │ 0        │ '00000000' │ '00'     │
│ 81      │ 0        │ 81      │ '01010001' │ '51'    │ 0        │ '00000000' │ '00'     │
│ 82      │ 0        │ 82      │ '01010010' │ '52'    │ 0        │ '00000000' │ '00'     │
│ 83      │ 0        │ 83      │ '01010011' │ '53'    │ 0        │ '00000000' │ '00'     │
│ 84      │ 0        │ 84      │ '01010100' │ '54'    │ 0        │ '00000000' │ '00'     │
│ 85      │ 0        │ 85      │ '01010101' │ '55'    │ 0        │ '00000000' │ '00'     │
│ 86      │ 0        │ 86      │ '01010110' │ '56'    │ 0        │ '00000000' │ '00'     │
│ 87      │ 0        │ 87      │ '01010111' │ '57'    │ 0        │ '00000000' │ '00'     │
│ 88      │ 0        │ 88      │ '01011000' │ '58'    │ 0        │ '00000000' │ '00'     │
│ 89      │ 0        │ 89      │ '01011001' │ '59'    │ 0        │ '00000000' │ '00'     │
│ 90      │ 0        │ 90      │ '01011010' │ '5A'    │ 0        │ '00000000' │ '00'     │
│ 91      │ 0        │ 91      │ '01011011' │ '5B'    │ 0        │ '00000000' │ '00'     │
│ 92      │ 0        │ 92      │ '01011100' │ '5C'    │ 0        │ '00000000' │ '00'     │
│ 93      │ 0        │ 93      │ '01011101' │ '5D'    │ 0        │ '00000000' │ '00'     │
│ 94      │ 0        │ 94      │ '01011110' │ '5E'    │ 0        │ '00000000' │ '00'     │
│ 95      │ 0        │ 95      │ '01011111' │ '5F'    │ 0        │ '00000000' │ '00'     │
│ 96      │ 0        │ 96      │ '01100000' │ '60'    │ 0        │ '00000000' │ '00'     │
│ 97      │ 0        │ 97      │ '01100001' │ '61'    │ 0        │ '00000000' │ '00'     │
│ 98      │ 0        │ 98      │ '01100010' │ '62'    │ 0        │ '00000000' │ '00'     │
│ 99      │ 0        │ 99      │ '01100011' │ '63'    │ 0        │ '00000000' │ '00'     │
│ 100     │ 0        │ 100     │ '01100100' │ '64'    │ 0        │ '00000000' │ '00'     │
│ 101     │ 0        │ 101     │ '01100101' │ '65'    │ 0        │ '00000000' │ '00'     │
│ 102     │ 0        │ 102     │ '01100110' │ '66'    │ 0        │ '00000000' │ '00'     │
│ 103     │ 0        │ 103     │ '01100111' │ '67'    │ 0        │ '00000000' │ '00'     │
│ 104     │ 0        │ 104     │ '01101000' │ '68'    │ 0        │ '00000000' │ '00'     │
│ 105     │ 0        │ 105     │ '01101001' │ '69'    │ 0        │ '00000000' │ '00'     │
│ 106     │ 0        │ 106     │ '01101010' │ '6A'    │ 0        │ '00000000' │ '00'     │
│ 107     │ 0        │ 107     │ '01101011' │ '6B'    │ 0        │ '00000000' │ '00'     │
│ 108     │ 0        │ 108     │ '01101100' │ '6C'    │ 0        │ '00000000' │ '00'     │
│ 109     │ 0        │ 109     │ '01101101' │ '6D'    │ 0        │ '00000000' │ '00'     │
│ 110     │ 0        │ 110     │ '01101110' │ '6E'    │ 0        │ '00000000' │ '00'     │
│ 111     │ 0        │ 111     │ '01101111' │ '6F'    │ 0        │ '00000000' │ '00'     │
│ 112     │ 0        │ 112     │ '01110000' │ '70'    │ 0        │ '00000000' │ '00'     │
│ 113     │ 0        │ 113     │ '01110001' │ '71'    │ 0        │ '00000000' │ '00'     │
│ 114     │ 0        │ 114     │ '01110010' │ '72'    │ 0        │ '00000000' │ '00'     │
│ 115     │ 0        │ 115     │ '01110011' │ '73'    │ 0        │ '00000000' │ '00'     │
│ 116     │ 0        │ 116     │ '01110100' │ '74'    │ 0        │ '00000000' │ '00'     │
│ 117     │ 0        │ 117     │ '01110101' │ '75'    │ 0        │ '00000000' │ '00'     │
│ 118     │ 0        │ 118     │ '01110110' │ '76'    │ 0        │ '00000000' │ '00'     │
│ 119     │ 0        │ 119     │ '01110111' │ '77'    │ 0        │ '00000000' │ '00'     │
│ 120     │ 0        │ 120     │ '01111000' │ '78'    │ 0        │ '00000000' │ '00'     │
│ 121     │ 0        │ 121     │ '01111001' │ '79'    │ 0        │ '00000000' │ '00'     │
│ 122     │ 0        │ 122     │ '01111010' │ '7A'    │ 0        │ '00000000' │ '00'     │
│ 123     │ 0        │ 123     │ '01111011' │ '7B'    │ 0        │ '00000000' │ '00'     │
│ 124     │ 0        │ 124     │ '01111100' │ '7C'    │ 0        │ '00000000' │ '00'     │
│ 125     │ 0        │ 125     │ '01111101' │ '7D'    │ 0        │ '00000000' │ '00'     │
│ 126     │ 0        │ 126     │ '01111110' │ '7E'    │ 0        │ '00000000' │ '00'     │
│ 127     │ 0        │ 127     │ '01111111' │ '7F'    │ 0        │ '00000000' │ '00'     │
│ 128     │ 0        │ 128     │ '10000000' │ '80'    │ 0        │ '00000000' │ '00'     │
│ 129     │ 0        │ 129     │ '10000001' │ '81'    │ 0        │ '00000000' │ '00'     │
│ 130     │ 0        │ 130     │ '10000010' │ '82'    │ 0        │ '00000000' │ '00'     │
│ 131     │ 0        │ 131     │ '10000011' │ '83'    │ 0        │ '00000000' │ '00'     │
│ 132     │ 0        │ 132     │ '10000100' │ '84'    │ 0        │ '00000000' │ '00'     │
│ 133     │ 0        │ 133     │ '10000101' │ '85'    │ 0        │ '00000000' │ '00'     │
│ 134     │ 0        │ 134     │ '10000110' │ '86'    │ 0        │ '00000000' │ '00'     │
│ 135     │ 0        │ 135     │ '10000111' │ '87'    │ 0        │ '00000000' │ '00'     │
│ 136     │ 0        │ 136     │ '10001000' │ '88'    │ 0        │ '00000000' │ '00'     │
│ 137     │ 0        │ 137     │ '10001001' │ '89'    │ 0        │ '00000000' │ '00'     │
│ 138     │ 0        │ 138     │ '10001010' │ '8A'    │ 0        │ '00000000' │ '00'     │
│ 139     │ 0        │ 139     │ '10001011' │ '8B'    │ 0        │ '00000000' │ '00'     │
│ 140     │ 0        │ 140     │ '10001100' │ '8C'    │ 0        │ '00000000' │ '00'     │
│ 141     │ 0        │ 141     │ '10001101' │ '8D'    │ 0        │ '00000000' │ '00'     │
│ 142     │ 0        │ 142     │ '10001110' │ '8E'    │ 0        │ '00000000' │ '00'     │
│ 143     │ 0        │ 143     │ '10001111' │ '8F'    │ 0        │ '00000000' │ '00'     │
│ 144     │ 0        │ 144     │ '10010000' │ '90'    │ 0        │ '00000000' │ '00'     │
│ 145     │ 0        │ 145     │ '10010001' │ '91'    │ 0        │ '00000000' │ '00'     │
│ 146     │ 0        │ 146     │ '10010010' │ '92'    │ 0        │ '00000000' │ '00'     │
│ 147     │ 0        │ 147     │ '10010011' │ '93'    │ 0        │ '00000000' │ '00'     │
│ 148     │ 0        │ 148     │ '10010100' │ '94'    │ 0        │ '00000000' │ '00'     │
│ 149     │ 0        │ 149     │ '10010101' │ '95'    │ 0        │ '00000000' │ '00'     │
│ 150     │ 0        │ 150     │ '10010110' │ '96'    │ 0        │ '00000000' │ '00'     │
│ 151     │ 0        │ 151     │ '10010111' │ '97'    │ 0        │ '00000000' │ '00'     │
│ 152     │ 0        │ 152     │ '10011000' │ '98'    │ 0        │ '00000000' │ '00'     │
│ 153     │ 0        │ 153     │ '10011001' │ '99'    │ 0        │ '00000000' │ '00'     │
│ 154     │ 0        │ 154     │ '10011010' │ '9A'    │ 0        │ '00000000' │ '00'     │
│ 155     │ 0        │ 155     │ '10011011' │ '9B'    │ 0        │ '00000000' │ '00'     │
│ 156     │ 0        │ 156     │ '10011100' │ '9C'    │ 0        │ '00000000' │ '00'     │
│ 157     │ 0        │ 157     │ '10011101' │ '9D'    │ 0        │ '00000000' │ '00'     │
│ 158     │ 0        │ 158     │ '10011110' │ '9E'    │ 0        │ '00000000' │ '00'     │
│ 159     │ 0        │ 159     │ '10011111' │ '9F'    │ 0        │ '00000000' │ '00'     │
│ 160     │ 0        │ 160     │ '10100000' │ 'A0'    │ 0        │ '00000000' │ '00'     │
│ 161     │ 0        │ 161     │ '10100001' │ 'A1'    │ 0        │ '00000000' │ '00'     │
│ 162     │ 0        │ 162     │ '10100010' │ 'A2'    │ 0        │ '00000000' │ '00'     │
│ 163     │ 0        │ 163     │ '10100011' │ 'A3'    │ 0        │ '00000000' │ '00'     │
│ 164     │ 0        │ 164     │ '10100100' │ 'A4'    │ 0        │ '00000000' │ '00'     │
│ 165     │ 0        │ 165     │ '10100101' │ 'A5'    │ 0        │ '00000000' │ '00'     │
│ 166     │ 0        │ 166     │ '10100110' │ 'A6'    │ 0        │ '00000000' │ '00'     │
│ 167     │ 0        │ 167     │ '10100111' │ 'A7'    │ 0        │ '00000000' │ '00'     │
│ 168     │ 0        │ 168     │ '10101000' │ 'A8'    │ 0        │ '00000000' │ '00'     │
│ 169     │ 0        │ 169     │ '10101001' │ 'A9'    │ 0        │ '00000000' │ '00'     │
│ 170     │ 0        │ 170     │ '10101010' │ 'AA'    │ 0        │ '00000000' │ '00'     │
│ 171     │ 0        │ 171     │ '10101011' │ 'AB'    │ 0        │ '00000000' │ '00'     │
│ 172     │ 0        │ 172     │ '10101100' │ 'AC'    │ 0        │ '00000000' │ '00'     │
│ 173     │ 0        │ 173     │ '10101101' │ 'AD'    │ 0        │ '00000000' │ '00'     │
│ 174     │ 0        │ 174     │ '10101110' │ 'AE'    │ 0        │ '00000000' │ '00'     │
│ 175     │ 0        │ 175     │ '10101111' │ 'AF'    │ 0        │ '00000000' │ '00'     │
│ 176     │ 0        │ 176     │ '10110000' │ 'B0'    │ 0        │ '00000000' │ '00'     │
│ 177     │ 0        │ 177     │ '10110001' │ 'B1'    │ 0        │ '00000000' │ '00'     │
│ 178     │ 0        │ 178     │ '10110010' │ 'B2'    │ 0        │ '00000000' │ '00'     │
│ 179     │ 0        │ 179     │ '10110011' │ 'B3'    │ 0        │ '00000000' │ '00'     │
│ 180     │ 0        │ 180     │ '10110100' │ 'B4'    │ 0        │ '00000000' │ '00'     │
│ 181     │ 0        │ 181     │ '10110101' │ 'B5'    │ 0        │ '00000000' │ '00'     │
│ 182     │ 0        │ 182     │ '10110110' │ 'B6'    │ 0        │ '00000000' │ '00'     │
│ 183     │ 0        │ 183     │ '10110111' │ 'B7'    │ 0        │ '00000000' │ '00'     │
│ 184     │ 0        │ 184     │ '10111000' │ 'B8'    │ 0        │ '00000000' │ '00'     │
│ 185     │ 0        │ 185     │ '10111001' │ 'B9'    │ 0        │ '00000000' │ '00'     │
│ 186     │ 0        │ 186     │ '10111010' │ 'BA'    │ 0        │ '00000000' │ '00'     │
│ 187     │ 0        │ 187     │ '10111011' │ 'BB'    │ 0        │ '00000000' │ '00'     │
│ 188     │ 0        │ 188     │ '10111100' │ 'BC'    │ 0        │ '00000000' │ '00'     │
│ 189     │ 0        │ 189     │ '10111101' │ 'BD'    │ 0        │ '00000000' │ '00'     │
│ 190     │ 0        │ 190     │ '10111110' │ 'BE'    │ 0        │ '00000000' │ '00'     │
│ 191     │ 0        │ 191     │ '10111111' │ 'BF'    │ 0        │ '00000000' │ '00'     │
│ 192     │ 0        │ 192     │ '11000000' │ 'C0'    │ 0        │ '00000000' │ '00'     │
│ 193     │ 0        │ 193     │ '11000001' │ 'C1'    │ 0        │ '00000000' │ '00'     │
│ 194     │ 0        │ 194     │ '11000010' │ 'C2'    │ 0        │ '00000000' │ '00'     │
│ 195     │ 0        │ 195     │ '11000011' │ 'C3'    │ 0        │ '00000000' │ '00'     │
│ 196     │ 0        │ 196     │ '11000100' │ 'C4'    │ 0        │ '00000000' │ '00'     │
│ 197     │ 0        │ 197     │ '11000101' │ 'C5'    │ 0        │ '00000000' │ '00'     │
│ 198     │ 0        │ 198     │ '11000110' │ 'C6'    │ 0        │ '00000000' │ '00'     │
│ 199     │ 0        │ 199     │ '11000111' │ 'C7'    │ 0        │ '00000000' │ '00'     │
│ 200     │ 0        │ 200     │ '11001000' │ 'C8'    │ 0        │ '00000000' │ '00'     │
│ 201     │ 0        │ 201     │ '11001001' │ 'C9'    │ 0        │ '00000000' │ '00'     │
│ 202     │ 0        │ 202     │ '11001010' │ 'CA'    │ 0        │ '00000000' │ '00'     │
│ 203     │ 0        │ 203     │ '11001011' │ 'CB'    │ 0        │ '00000000' │ '00'     │
│ 204     │ 0        │ 204     │ '11001100' │ 'CC'    │ 0        │ '00000000' │ '00'     │
│ 205     │ 0        │ 205     │ '11001101' │ 'CD'    │ 0        │ '00000000' │ '00'     │
│ 206     │ 0        │ 206     │ '11001110' │ 'CE'    │ 0        │ '00000000' │ '00'     │
│ 207     │ 0        │ 207     │ '11001111' │ 'CF'    │ 0        │ '00000000' │ '00'     │
│ 208     │ 0        │ 208     │ '11010000' │ 'D0'    │ 0        │ '00000000' │ '00'     │
│ 209     │ 0        │ 209     │ '11010001' │ 'D1'    │ 0        │ '00000000' │ '00'     │
│ 210     │ 0        │ 210     │ '11010010' │ 'D2'    │ 0        │ '00000000' │ '00'     │
│ 211     │ 0        │ 211     │ '11010011' │ 'D3'    │ 0        │ '00000000' │ '00'     │
│ 212     │ 0        │ 212     │ '11010100' │ 'D4'    │ 0        │ '00000000' │ '00'     │
│ 213     │ 0        │ 213     │ '11010101' │ 'D5'    │ 0        │ '00000000' │ '00'     │
│ 214     │ 0        │ 214     │ '11010110' │ 'D6'    │ 0        │ '00000000' │ '00'     │
│ 215     │ 0        │ 215     │ '11010111' │ 'D7'    │ 0        │ '00000000' │ '00'     │
│ 216     │ 0        │ 216     │ '11011000' │ 'D8'    │ 0        │ '00000000' │ '00'     │
│ 217     │ 0        │ 217     │ '11011001' │ 'D9'    │ 0        │ '00000000' │ '00'     │
│ 218     │ 0        │ 218     │ '11011010' │ 'DA'    │ 0        │ '00000000' │ '00'     │
│ 219     │ 0        │ 219     │ '11011011' │ 'DB'    │ 0        │ '00000000' │ '00'     │
│ 220     │ 0        │ 220     │ '11011100' │ 'DC'    │ 0        │ '00000000' │ '00'     │
│ 221     │ 0        │ 221     │ '11011101' │ 'DD'    │ 0        │ '00000000' │ '00'     │
│ 222     │ 0        │ 222     │ '11011110' │ 'DE'    │ 0        │ '00000000' │ '00'     │
│ 223     │ 0        │ 223     │ '11011111' │ 'DF'    │ 0        │ '00000000' │ '00'     │
│ 224     │ 0        │ 224     │ '11100000' │ 'E0'    │ 0        │ '00000000' │ '00'     │
│ 225     │ 0        │ 225     │ '11100001' │ 'E1'    │ 0        │ '00000000' │ '00'     │
│ 226     │ 0        │ 226     │ '11100010' │ 'E2'    │ 0        │ '00000000' │ '00'     │
│ 227     │ 0        │ 227     │ '11100011' │ 'E3'    │ 0        │ '00000000' │ '00'     │
│ 228     │ 0        │ 228     │ '11100100' │ 'E4'    │ 0        │ '00000000' │ '00'     │
│ 229     │ 0        │ 229     │ '11100101' │ 'E5'    │ 0        │ '00000000' │ '00'     │
│ 230     │ 0        │ 230     │ '11100110' │ 'E6'    │ 0        │ '00000000' │ '00'     │
│ 231     │ 0        │ 231     │ '11100111' │ 'E7'    │ 0        │ '00000000' │ '00'     │
│ 232     │ 0        │ 232     │ '11101000' │ 'E8'    │ 0        │ '00000000' │ '00'     │
│ 233     │ 0        │ 233     │ '11101001' │ 'E9'    │ 0        │ '00000000' │ '00'     │
│ 234     │ 0        │ 234     │ '11101010' │ 'EA'    │ 0        │ '00000000' │ '00'     │
│ 235     │ 0        │ 235     │ '11101011' │ 'EB'    │ 0        │ '00000000' │ '00'     │
│ 236     │ 0        │ 236     │ '11101100' │ 'EC'    │ 0        │ '00000000' │ '00'     │
│ 237     │ 0        │ 237     │ '11101101' │ 'ED'    │ 0        │ '00000000' │ '00'     │
│ 238     │ 0        │ 238     │ '11101110' │ 'EE'    │ 0        │ '00000000' │ '00'     │
│ 239     │ 0        │ 239     │ '11101111' │ 'EF'    │ 0        │ '00000000' │ '00'     │
│ 240     │ 0        │ 240     │ '11110000' │ 'F0'    │ 0        │ '00000000' │ '00'     │
│ 241     │ 0        │ 241     │ '11110001' │ 'F1'    │ 0        │ '00000000' │ '00'     │
│ 242     │ 0        │ 242     │ '11110010' │ 'F2'    │ 0        │ '00000000' │ '00'     │
│ 243     │ 0        │ 243     │ '11110011' │ 'F3'    │ 0        │ '00000000' │ '00'     │
│ 244     │ 0        │ 244     │ '11110100' │ 'F4'    │ 0        │ '00000000' │ '00'     │
│ 245     │ 0        │ 245     │ '11110101' │ 'F5'    │ 0        │ '00000000' │ '00'     │
│ 246     │ 0        │ 246     │ '11110110' │ 'F6'    │ 0        │ '00000000' │ '00'     │
│ 247     │ 0        │ 247     │ '11110111' │ 'F7'    │ 0        │ '00000000' │ '00'     │
│ 248     │ 0        │ 248     │ '11111000' │ 'F8'    │ 0        │ '00000000' │ '00'     │
│ 249     │ 0        │ 249     │ '11111001' │ 'F9'    │ 0        │ '00000000' │ '00'     │
│ 250     │ 0        │ 250     │ '11111010' │ 'FA'    │ 0        │ '00000000' │ '00'     │
│ 251     │ 0        │ 251     │ '11111011' │ 'FB'    │ 0        │ '00000000' │ '00'     │
│ 252     │ 0        │ 252     │ '11111100' │ 'FC'    │ 0        │ '00000000' │ '00'     │
│ 253     │ 0        │ 253     │ '11111101' │ 'FD'    │ 0        │ '00000000' │ '00'     │
│ 254     │ 0        │ 254     │ '11111110' │ 'FE'    │ 0        │ '00000000' │ '00'     │
│ 255     │ 0        │ 255     │ '11111111' │ 'FF'    │ 0        │ '00000000' │ '00'     │
└─────────┴──────────┴─────────┴────────────┴─────────┴──────────┴────────────┴──────────┘
```
---
## CPU Architecture
<img width="712" height="1080" alt="MZ2284MAXRISC CPU architecture" src="https://github.com/user-attachments/assets/7227156a-ff37-47fa-8649-fac3c4a0e678" />

---
## Instruction Set Architecture (ISA)
### 1. Memory Access Instructions

| Instruction | Operands | Description                                 |
| ----------- | -------- | ------------------------------------------- |
| LDM         | address  | Load value from memory at `address` into R0 |
| STM         | address  | Store value of R0 into memory at `address`  |
| LDV         | address  | Load the validity of memory `address` into R0 |
| ALLOC       | address  | Mark the memory address as allocated/valid  |
| FREE        | address  | Mark the memory address as free/invalid     |
---
### 2. Data Transfer Instructions
| Instruction | Operands | Description                   |
| ----------- | -------- | ----------------------------- |
| MOVR0DR     | data     | Move immediate `data` into R0 |
| MOVR1R0     | -        | Move value from R0 into R1    |
| MOVR0R1     | -        | Move value from R1 into R0    |
| MOVIRR0     | -        | Move value from R0 into IR    |
| MOVR0RR     | -        | Move value from RR into R0    |
| MOVPRR0     | -        | Move value from R0 into PR    |
| MOVR0PR     | -        | Move value from PR into R0    |
---
### 3. Flag Transfer Instructions
| Instruction | Operands | Description                  |
| ----------- | -------- | ---------------------------- |
| MOVR0Z      | -        | Move value of flag Z into R0 |
| MOVR0C      | -        | Move value of flag C into R0 |
| MOVR0N      | -        | Move value of flag N into R0 |
---
### 4. Pointer Dereferencing Instructions
| Instruction | Operands | Description                                     |
| ----------- | -------- | ----------------------------------------------- |
| LDDEREF     | -        | Load value from memory at address in PR into R0 |
| STDEREF     | -        | Store value of R0 into memory at address in PR  |
---
### 5. Arithmetic and Logical Instructions
| Instruction | Operands | Description                                    |                        
| ----------- | -------- | ---------------------------------------------- | 
| SUM         | -        | Add R0 + IR → RR, update Z and C flags         |                        
| SUB         | -        | Subtract IR from R0 → RR, update Z and N flags |      
| CMP         | -        | Compare R0 and IR, update Z and N flags        |      
| AND         | -        | Bitwise AND R0 & IR → RR, update Z flag        |                        
| OR          | -        | Bitwise OR R0 OR IR -> RR                      | 
| NOT         | -        | Bitwise NOT of R0 → RR, update Z flag          |                        
| XOR         | -        | Bitwise XOR R0 ^ IR → RR, update Z flag        |                        
---
### 6. Increment and Decrement Instructions
| Instruction | Operands | Description  |
| ----------- | -------- | ------------ |
| INCR0       | -        | Increment R0 |
| INCPR       | -        | Increment PR |
| DECR0       | -        | Decrement R0 |
| DECPR       | -        | Decrement PR |
---
### 7. Control and Branching Instructions
| Instruction | Operands | Description                            |
| ----------- | -------- | -------------------------------------- |
| JMP         | label    | Jump to instruction at `label`         |
| JZ          | label    | Jump to `label` if Z flag is 1         |
| JNZ         | label    | Jump to `label` if Z flag is 0         |
| JC          | label    | Jump to `label` if C flag is 1         |
| JNC         | label    | Jump to `label` if C flag is 0         |
| JN          | label    | Jump to `label` if N flag is 1         |
| JNN         | label    | Jump to `label` if N flag is 0         |
| CALL        | label    | Push IP onto stack and jump to `label` |
| RETURN      | -        | Pop IP from stack                      |
| HALT        | -        | Stop execution                         |
| NOP         | -        | No operation                           |
